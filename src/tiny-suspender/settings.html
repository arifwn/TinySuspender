<!DOCTYPE html>
<html>
<head>
  <title>Tiny Suspender: Settings</title>
  <link rel="stylesheet" type="text/css" href="css/settings.css">
</head>
<body>
  <div class="container">
    <div class="header">Tiny Suspender: Settings</div>
    <form id="config">
      <div class="fieldset">
        <label>Automatically suspend backgroud tabs after (minutes):</label>
        <input type="number" value="" min="0" name="idle_time">
        <small>Set to 0 to disable automatic suspend.</small>
      </div>

      <div class="fieldset checkbox">
        <label><input type="checkbox" name="autorestore" value="enabled"> Automatically restore tab when brought to foreground</label>
      </div>

      <div class="fieldset checkbox">
        <label><input type="checkbox" name="skip_audible" value="enabled"> Don't automatically suspend audible tabs</label>
      </div>

      <div class="fieldset checkbox">
        <label><input type="checkbox" name="skip_pinned" value="enabled"> Don't automatically suspend pinned tabs</label>
      </div>

      <div class="fieldset">
        <label>Whitelist:</label>
        <textarea name="whitelist" placeholder="/google/"></textarea>
        <small>
          Enter a list of urls that should be whitelisted. Prefix match will be used to match url with whitelist entries (e.g. https://google.com/ will also match https://google.com/maps). <br>
          Regex can be specified by wrapping the rule in forward slashes (e.g. /google/).
        </small>
      </div>

      <button type="submit">Save</button>
      <small id="message"></small>

      <div class="separator"></div>

      <h2>Experimental Features</h2>
      <p><em>Cool stuff, but might be unexpectedly broken. Only use them if you're feeling brave!</em></p>

      <div class="fieldset checkbox">
        <label><input type="checkbox" name="enable_tab_discard" value="enabled"> Use Native Tab Discard API</label>
        <div class="infobox">
          <p>Since Chrome v54, Chrome includes an experimental native tab discarding functionality. Enabling this option will make Tiny Suspender uses Chrome native tab discarding instead of its own tab suspension procedure. <strong>Please be aware of the benefits and limitations before activating this feature:</strong></p>

          <p>Benefits:</p>
          <ul>
            <li>Native tab discard could potentially reclaims higher amount of memory compared to Tiny Suspender's own tab suspension procedure.</li>
            <li>Tab state will be preserved. Your scrolling position, filled form, etc. won't be lost when the tab restored. Although some users report issues under specific circumstances, it seems to works ok for typical usage.</li>
          </ul>

          <p>Limitations:</p>
          <ul>
            <li>You will not be able to suspend currently active tab. Only background tabs are suspendable.</li>
            <li>When using the native tab discarding functionality, tab restore process can only be initiated by manually bringing the suspended tab into foreground.</li>
            <ul>
              <li>This means the <em>"Automatically restore tab when brought to foreground"</em> option is always enabled even if you disabled it.</li>
              <li>Also the <em>"Restore All Suspended Tabs"</em> function will not be available.</li>
            </ul>
            <li>When your browser is restarted (due to updates, crash, etc), all suspended tabs will be restored automatically. This will result in very high memory consumption if you have a lot of suspended tabs before the restart happened.</li>
          </ul>
        </div>
      </div>


      <button type="submit">Save</button>
      <small id="message2"></small>
    </form>
  </div>
  <script type="text/javascript" src="js/settings.js"></script>
</body>
</html>